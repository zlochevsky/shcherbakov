(()=>{(function(t){t.fn.transpose=function(i){var c=t.extend({},t.fn.transpose.defaults,i),l=null,u=[{name:"Ab",value:0,type:"F"},{name:"A",value:1,type:"N"},{name:"A#",value:2,type:"S"},{name:"B",value:2,type:"F"},{name:"H",value:3,type:"N"},{name:"C",value:4,type:"N"},{name:"C#",value:5,type:"S"},{name:"Db",value:5,type:"F"},{name:"D",value:6,type:"N"},{name:"D#",value:7,type:"S"},{name:"Eb",value:7,type:"F"},{name:"E",value:8,type:"N"},{name:"F",value:9,type:"N"},{name:"F#",value:10,type:"S"},{name:"Gb",value:10,type:"F"},{name:"G",value:11,type:"N"},{name:"G#",value:0,type:"S"}],m=function(e){e.charAt(e.length-1)=="m"&&(e=e.substring(0,e.length-1));for(var a=0;a<u.length;a++)if(e.toUpperCase()==u[a].name.toUpperCase())return u[a]},v=function(e){return e.length>1&&(e.charAt(1)=="b"||e.charAt(1)=="#")?e.substr(0,2):e.substr(0,1)},p=function(e,a,n){var r=m(e).value+a;r>11?r-=12:r<0&&(r+=12);var s=0;if(r==0||r==2||r==5||r==7||r==10)switch(n.name){case"A":case"A#":case"B":case"C":case"C#":case"D":case"D#":case"E":case"F#":case"G":case"G#":case"H":for(;s<u.length;s++)if(u[s].value==r&&u[s].type=="S")return u[s];default:for(;s<u.length;s++)if(u[s].value==r&&u[s].type=="F")return u[s]}else for(;s<u.length;s++)if(u[s].value==r)return u[s]},k=function(e){switch(e.charAt(e.length-1)){case"b":return"F";case"#":return"S";default:return"N"}},d=function(e,a){return e>a?0-(e-a):e<a?0+(a-e):0},g=function(e,a){var n=m(a);if(l.name!=n.name){var r=d(l.value,n.value);t("span.c",e).each(function(s,o){y(o,r,n)}),l=n}},y=function(e,a,n){var r=t(e),s=r.text(),o=v(s),h=p(o,a,n),f=h.name+s.substr(o.length);o==o.toLowerCase()&&(f=f.toLowerCase()),r.text(f);var b=r[0].nextSibling;console.log(b)},A=function(e,a,n){return e>a?n+(e-a):e<a?n-(a-e):n},S=function(e,a){for(var n=[],r=0;r<a;r++)n.push(e);return n.join("")},N=function(e){for(var a=e.replace(/\s+/," ").split(" "),n=0;n<a.length;n++)if(!t.trim(a[n]).length==0&&!a[n].match(c.chordRegex))return!1;return!0},C=function(e){return e.replace(c.chordReplaceRegex,"<span class='c'>$1</span>")};return t(this).each(function(){var e=t(this).attr("data-key");if((!e||t.trim(e)=="")&&(e=c.key),!e||t.trim(e)=="")throw"Starting key not defined.";l=m(e);var a=[];t(u).each(function(s,o){l.name==o.name?a.push("<a href='#' class='selected'>"+o.name+"</a>"):a.push("<a href='#'>"+o.name+"</a>")});var n=t(this),r=t("<div class='transpose-keys'></div>");r.html(a.join("")),t("a",r).click(function(s){return s.preventDefault(),g(n,t(this).text()),t(".transpose-keys a").removeClass("selected"),t(this).addClass("selected"),!1}),t(this).parent().find(".transpose-wrapper").html(r),t(this).find("span.ch").each(function(s,o){var h=t(o).html();t(o).html(C(h))})})},t.fn.transpose.defaults={chordRegex:/^[A-Ha-h][b\#]?(2|4|5|6|7|9|11|13|6\/9|7\-5|7\-9|7\#5|7\#9|7\+5|7\+9|b5|#5|#9|7b5|7b9|7sus2|7sus4|add2|add4|add9|aug|dim|dim7|m\/maj7|m6|m7|m7b5|m9|m11|m13|maj7|maj9|maj11|maj13|mb5|m|sus|sus2|sus4)*(\/[A-H][b\#]*)*$/,chordReplaceRegex:/([A-Ha-h][b\#]?(2|4|5|6|7|9|11|13|6\/9|7\-5|7\-9|7\#5|7\#9|7\+5|7\+9|b5|#5|#9|7b5|7b9|7sus2|7sus4|add2|add4|add9|aug|dim|dim7|m\/maj7|m6|m7|m7b5|m9|m11|m13|maj7|maj9|maj11|maj13|mb5|m|sus|sus2|sus4)*)/g}})(jQuery);jQuery.noConflict();function j(){jQuery("span.ch").each(function(t,i){jQuery(i).toggle(),jQuery(".transpose-keys").toggle()})}jQuery(document).ready(function(){jQuery("pre").transpose(),jQuery("#toggleChords").bind("click",function(){var t=jQuery(this);t.toggleClass("note1").toggleClass("note2"),j()})});})();
/*!
 * jQuery Chord Transposer plugin v1.0
 * http://codegavin.com/projects/transposer
 *
 * Copyright 2010, Jesse Gavin
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://codegavin.com/license
 *
 * Date: Sat Jun 26 21:27:00 2010 -0600
 */
